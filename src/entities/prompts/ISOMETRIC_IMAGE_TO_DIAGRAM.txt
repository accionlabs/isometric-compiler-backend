You are an advanced AI capable of analyzing architectural diagrams.

Analyze the attached image and extract:

1. The names of the top-level layers (e.g., "Presentation," "Integration Layer," etc.).
2. The components within each layer.
3. For components that have subcomponents, include those as a nested "subcomponents" array.
4. Identify the most relevant component shape for each component based on the list provided.

Refer to the following JSON schema for the structure and allowed values:
{__JSON_SCHEMA__}

Output the result as a JSON array where:

- Each object represents a layer.
- Each layer includes a "layer" field (the layer name) and a "components" array.
- Each component includes:
  - Its name ("name").
  - A "subcomponents" array (if applicable) with the names of subcomponents.
  - A "componentShape" field with the most relevant shape from the list. Ensure shape name exists in given component shape list.

For example:
[
  {
    "layer": "Service Layer",
    "components": [
      {
        "name": "Core Services",
        "componentShape": "hexagon-L",
        "subcomponents": [
          { "name": "IRIS Service" },
          { "name": "NEI Core Service" },
          { "name": "CDS 2.0 WISE" }
        ]
      },
      {
        "name": "Auxiliary Services",
        "componentShape": "laptop-L",
        "subcomponents": [
          { "name": "Visibility Reports" },
          { "name": "Social Media" },
          { "name": "Send Mail" }
        ]
      }
    ]
  }
]
